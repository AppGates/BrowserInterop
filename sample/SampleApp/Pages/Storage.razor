@page "/storage"
@inject IJSRuntime jsRuntime;
@using BrowserInterop
Local Storage :
<button type="button" id="window-localStorage-setItem" @onclick="SetItem" >localStorage.setItem</button>
<button type="button" id="window-localStorage-getItem" @onclick="GetItem" >localStorage.getItem</button>
<button type="button" id="window-localStorage-key-get" @onclick="Key" >localStorage.key</button>
<ul>
    <li>Length : <span id="window-localStorage-length">@length</span></li>
    <li>storageTest : <span id="window-localStorage-getItem-test">@storageTest?.Id</span></li>
    <li>key : <span id="window-localStorage-key">@key</span></li>
</ul>
@code{
    private int? length;
    private WindowInterop window;
    private string key;
    StorageTestClass storageTest;
    protected override async Task OnInitializedAsync()
    {
        window = await jsRuntime.Window();
        length = await window.LocalStorage.Length();
    }

    private async Task SetItem(){
        await window.LocalStorage.SetItem("test",new StorageTestClass(){Id = 978789});
    }    
    
    private async Task GetItem(){
        storageTest = await window.LocalStorage.GetItem<StorageTestClass>("test");
    }    
    private async Task Key(){
        key = await window.LocalStorage.Key(0);
    }

    public class StorageTestClass{
        public int Id { get; set; }
    }
}